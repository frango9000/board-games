<app-core-card-view *transloco="let t; read: TRANSLOCO_SCOPE" [title]="t('header')">
  <form [formGroup]="form" novalidate (ngSubmit)="onSubmit()">
    <mat-card appearance="outlined">
      <mat-card-content>
        <mat-form-field>
          <input matInput [placeholder]="t('placeholder.username')" formControlName="username" required />
          <mat-error>
            <app-form-error [control]="form.controls.username" name="username"></app-form-error>
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput type="email" [placeholder]="t('placeholder.email')" formControlName="email" required />
          <mat-error>
            <app-form-error [control]="form.controls.email" name="email"></app-form-error>
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput [placeholder]="t('placeholder.firstname')" formControlName="firstname" />
          <mat-error>
            <app-form-error [control]="form.controls.firstname" name="firstname"></app-form-error>
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput [placeholder]="t('placeholder.lastname')" formControlName="lastname" />
          <mat-error>
            <app-form-error [control]="form.controls.lastname" name="lastname"></app-form-error>
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput [placeholder]="t('placeholder.profileImageUrl')" formControlName="profileImageUrl" />
          <mat-error>
            <app-form-error [control]="form.controls.profileImageUrl" name="profileImageUrl"></app-form-error>
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>{{ t('placeholder.role') }}</mat-label>
          <mat-select formControlName="roleId">
            <mat-option *ngFor="let role of roles$ | async" [value]="role.id" [attr.data-cy]="role.name + '-option'">
              {{ role.name }}
            </mat-option>
          </mat-select>
          <mat-error>
            <app-form-error [control]="form.controls.roleId" name="roleId"></app-form-error>
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <input
            matInput
            type="password"
            [placeholder]="t('placeholder.password')"
            formControlName="password"
            required
          />
          <mat-error>
            <app-form-error [control]="form.controls.password" name="password"></app-form-error>
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <input
            matInput
            type="password"
            [placeholder]="t('placeholder.password2')"
            formControlName="password2"
            required
          />
          <mat-error>
            <app-form-error [control]="form.controls.password2" name="password"></app-form-error>
          </mat-error>
        </mat-form-field>
        <mat-checkbox formControlName="active">{{ t('placeholder.active') }}</mat-checkbox>
        <mat-checkbox formControlName="locked">{{ t('placeholder.locked') }}</mat-checkbox>
        <mat-checkbox formControlName="expired">{{ t('placeholder.expired') }}</mat-checkbox>
        <mat-checkbox formControlName="credentialsExpired">{{ t('placeholder.credentialsExpired') }}</mat-checkbox>
      </mat-card-content>
      <mat-card-actions [align]="'end'">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="!form.valid || !!!(userManagementService.hasTemplate('create') | async)"
        >
          {{ t('button.create') }}
        </button>
      </mat-card-actions>
    </mat-card>
  </form>
</app-core-card-view>
